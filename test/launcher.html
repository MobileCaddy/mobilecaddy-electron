<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">

    <!-- <script src="force.js"></script> -->
    <!--<script src="node_modules/mobilecaddy-electron/lib/force.js"></script>
    <script src="node_modules/mobilecaddy-electron/lib/launcher.js"></script>
    <link rel="stylesheet" href="app.css" />-->

    <script src="../node_modules/mobilecaddy-codeflow/js/MockCordova.js"></script>

    <title>Test Launcher</title>
  </head>
  <body>
    <!-- All of the Node.js APIs are available in this renderer process. -->
    <script type="text/javascript">
      const ipcRenderer = require('electron').ipcRenderer;
      var device = ipcRenderer.sendSync('request-device-info', '');
      console.log("device", device);

      // Create Soups
      var soups = [
        {
          table: 'appSoup',
          indexSpecs: [{path: 'Name', type: 'string'},{path: 'CurrentValue', type: 'string'}, {path: 'NewValue', type: 'string'}]
        },
        {
          table: 'recsToSync',
          indexSpecs: [{ path: 'Mobile_Table_Name', type: 'string' },
                       { path: 'SOUP_Record_Id', type: 'string' },
                       { path: 'Id', type: 'string' },
                       { path: 'LastModifiedDateTime', type: 'integer' },
                       { path: 'CRUD_Operation', type: 'string' },
                       { path: 'Current_Connection_Session', type: 'string' }]
        },
        {
          table: 'syncLib_system_data',
          indexSpecs: [{ path: 'MC_Var_String_002', type: 'string' },
                       { path: 'MC_Var_Integer_002', type: 'integer' },
                       { path: 'MC_Var_Integer_006', type: 'integer' },
                       { path: 'MC_Var_String_009', type: 'string' },
                       { path: 'MC_Var_String_016', type: 'string' },
                       { path: 'MC_Var_String_015', type: 'string' },
                       { path: 'MC_Var_String_014', type: 'string' },
                       { path: 'MC_Var_String_005', type: 'string' },
                       { path: 'MC_Var_Integer_005', type: 'integer' },
                       { path: 'MC_Var_String_010', type: 'string' },
                       { path: 'MC_Var_Integer_001', type: 'integer' },
                       { path: 'MC_Var_String_012', type: 'string' },
                       { path: 'MC_Var_Integer_003', type: 'integer' },
                       { path: 'MC_Var_Integer_004', type: 'integer' },
                       { path: 'MC_Var_String_007', type: 'string' },
                       { path: 'MC_Var_String_001', type: 'string' },
                       { path: 'MC_Var_String_020', type: 'string' },
                       { path: 'MC_Var_String_011', type: 'string' },
                       { path: 'MC_Var_String_018', type: 'string' },
                       { path: 'MC_Var_String_008', type: 'string' },
                       { path: 'MC_Var_String_003', type: 'string' },
                       { path: 'MC_Var_String_017', type: 'string' },
                       { path: 'MC_Var_String_019', type: 'string' },
                       { path: 'MC_Var_String_013', type: 'string' },
                       { path: 'MC_Var_String_006', type: 'string' },
                       { path: 'MC_Var_String_004', type: 'string' },
                       { path: 'MC_Var_String_021', type: 'string' }]
        },
        {
          table: 'Connection_Session__mc',
          indexSpecs: [{ path: 'LastModifiedDate', type: 'integer' },
                       { path: 'CreatedDate', type: 'integer' },
                       { path: 'mobilecaddy1__Session_Created_Location__Longitude__s',
                         type: 'floating' },
                       { path: 'mobilecaddy1__Status__c', type: 'string' },
                       { path: 'IsDeleted', type: 'string' },
                       { path: 'Name', type: 'string' },
                       { path: 'mobilecaddy1__Application_User_Device_AUD__c',
                         type: 'string' },
                       { path: 'Id', type: 'string' },
                       { path: 'mobilecaddy1__Session_Created_Location_Error__c',
                         type: 'string' },
                       { path: 'mobilecaddy1__Session_Type__c', type: 'string' },
                       { path: 'mobilecaddy1__Device_Call_Date_Time__c',
                         type: 'floating' },
                       { path: 'mobilecaddy1__Session_Created_Location__Latitude__s',
                         type: 'floating' },
                       { path: 'mobilecaddy1__Mobile_Process_Status__c',
                         type: 'string' },
                       { path: 'SystemModstamp', type: 'integer' },
                       { path: 'mobilecaddy1__MC_Proxy_ID__c', type: 'string' }]
        },
        {
          table: 'Mobile_Log__mc',
          indexSpecs: [{ path: 'IsDeleted', type: 'string' },
                       { path: 'RecordTypeId', type: 'string' },
                       { path: 'SystemModstamp', type: 'integer' },
                       { path: 'mobilecaddy1__Connection_Session__c', type: 'string' },
                       { path: 'mobilecaddy1__MC_Proxy_ID__c', type: 'string' },
                       { path: 'Name', type: 'string' },
                       { path: 'Id', type: 'string' },
                       { path: 'mobilecaddy1__Error_Text__c', type: 'string' },
                       { path: 'mobilecaddy1__Log_Type__c', type: 'string' },
                       { path: 'mobilecaddy1__Data_Dump__c', type: 'string' },
                       { path: 'mobilecaddy1__Application_User_Device__c',
                         type: 'string' }]
        }
      ]

      soups.forEach(function(soup) {
        ipcRenderer.sendSync('smartstore', {method: 'registerSoup', args: soup});
      })


    </script>
  </body>
</html>
